<% title "Coliving in #{@house.name}" %>
<% description "See the details of this house" %>
<!-- Beautiful and cozy yet spacious Hollywood home. This duplex was remodeled in 2016 and is appointed with all the comforts you could ever want in a home away from home. -->
  <div class="bloc-house">
    <div id="formhousebooking">
      <%= render "shared/formshowhouse" %>
    </div>
  </div>
  <div class="caroussel-show">
    <%= render 'shared/caroussel2' %>
    <div class="titre-house-info">
      <h1><%= Coliving in #{@house.name} %></h1>
      <p><%= @house.description %></p>
    </div>
  </div>

<!-- Debut du travail de Maxime -->
  <div class="main-container">
    <div class="description-container">
        <div class="row">
          <div class=" col-xs-12 bloc-list">
            <div class="liste">
              <h2>Description</h2>
              <p><%= @house.description %></p>
            </div>
            <div class="capacity-restante">
              <p>Remaining Capacity: <%= @house.capacity - @bookings_house.count %></p>
            </div>
            <div class="liste">
              <h2>Price</h2>
              <p>â‚¬ <%= @house.price %></p>
            </div>
            <div class="liste">
              <h2>Capacity</h2>
              <p><i class="fa fa-users" aria-hidden="true"></i> <%= @house.capacity%></p>
            </div>
            <div class="liste">
              <h2>Amenities</h2>
                <div id="features">
                  <%= render "shared/feature_list" %>
                </div>
            </div>
            <h2>Reviews</h2>
<!-- Fin du travail de Maxime -->

            <% if @house.reviews.count != 0 %>
              <% stars = (@house_ratings / @house.reviews.count) %>
                <% if stars < 5 %>
                  <% stars.times do %>
                    <i class="fa fa-star" aria-hidden="true"></i>
                  <% end %>

                <% stars_vides = 5 - stars %>
                  <% stars_vides.times do %>
                    <i class="fa fa-star-o" aria-hidden="true"></i>
                  <% end %>
                <% end %>
            <% end %>

             <% if @house.reviews.count == 0 %>
                  <% 5.times do %>
                    <i class="fa fa-star-o" aria-hidden="true"></i>
                  <% end %>
              <% end%>



            <% @reviews = @house.reviews%>
            <% if @house.reviews %>
              <% @reviews.each do |review| %>
                <div class="message">
                  <%= cl_image_tag review.profile.photo, class: "avatar-navbar"%>
                  <div class="message-body">
                    <p><strong><%=review.profile.city.capitalize%></strong></p>
                    <p><%=review.created_at%></p>
                  </div>
                  <div class="message-body" >
                    <p><strong><%= review.title_review%></strong></p>
                    <p><%=review.content_review%></p>
                  </div>
                  <div class="message-status">
                  </div>
                </div>
              <%end%>
            <%end%>
          </div>
        </div>
    </div>
  </div>


  <!-- Espace Biographie-->
  <div id="biographies">
    <h3>Current Tenants</h3>
    <%= render "shared/biography" %>
  </div>


  <div class="map_show">
    <% @markers %>
    <div id="map" style="width: 100%; height: 250px;"></div>
      <% content_for(:after_js) do %>
        <%= javascript_tag do %>
          var handler = Gmaps.build('Google');
          handler.buildMap({ internal: { id: 'map' } }, function() {
          markers = handler.addMarkers(<%= raw @markers.to_json %>);
          handler.bounds.extendWith(markers);
          handler.fitMapToBounds();
          if (markers.length == 0) {
          handler.getMap().setZoom(2);
          } else if (markers.length == 1) {
          handler.getMap().setZoom(14);
          }
          });
        <%end%>
      <% end %>
    </div>
</div>
